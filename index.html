<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Electronic Pen Documentation</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/9.3.0/mermaid.min.js"></script>
    
    <style>
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes highlight {
            0% { background-position: -100% 0; }
            100% { background-position: 200% 0; }
        }

        .floating {
            animation: float 3s ease-in-out infinite;
        }

        .pulsing {
            animation: pulse 2s ease-in-out infinite;
        }

        .highlight-gradient {
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(59, 130, 246, 0.1) 50%, 
                transparent 100%);
            background-size: 200% 100%;
            animation: highlight 3s linear infinite;
        }

        .component-card {
            transition: transform 0.3s ease;
        }

        .component-card:hover {
            transform: translateY(-5px) scale(1.02);
        }

        .pen-diagram {
            height: 600px;
            position: relative;
            overflow: hidden;
        }

        .scrolling-text {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }

        .scrolling-text.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .interactive-model {
            width: 100%;
            height: 400px;
            background: #f8f9fa;
            border-radius: 8px;
            position: relative;
        }

        .component-highlight {
            position: absolute;
            border: 2px solid #3b82f6;
            border-radius: 4px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .loading-animation {
            width: 50px;
            height: 50px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .exploded-view {
            position: relative;
            transition: transform 0.5s ease;
        }

        .exploded-view:hover {
            transform: scale(1.1);
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto px-4 py-8">
        <!-- Hero Section with Animated Title -->
        <div class="text-center mb-12 relative overflow-hidden">
            <h1 class="text-5xl font-bold mb-4 floating">
                Electronic Pen Structure
            </h1>
            <p class="text-xl text-gray-600 pulsing">
                Interactive Technical Documentation
            </p>
        </div>

        <!-- Interactive 3D Model Section -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-4">Interactive 3D Model</h2>
            <div id="3d-model" class="interactive-model">
                <!-- WebGL content will be inserted here -->
            </div>
        </div>

        <!-- Animated Component Breakdown -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
            <!-- Writing Device Card -->
            <div class="component-card bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold mb-4">Writing Device</h3>
                <div class="highlight-gradient p-4 rounded">
                    <ul class="list-disc ml-4">
                        <li class="mb-2">First Portion (10A)</li>
                        <li class="mb-2">Second Portion (10B)</li>
                        <li class="mb-2">Lead Delivery System</li>
                    </ul>
                </div>
            </div>

            <!-- Pressure System Card -->
            <div class="component-card bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold mb-4">Pressure System</h3>
                <div class="highlight-gradient p-4 rounded">
                    <ul class="list-disc ml-4">
                        <li class="mb-2">Transmitter (14)</li>
                        <li class="mb-2">Detector (15)</li>
                        <li class="mb-2">Signal Processing</li>
                    </ul>
                </div>
            </div>

            <!-- Electronics Card -->
            <div class="component-card bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-xl font-bold mb-4">Electronics</h3>
                <div class="highlight-gradient p-4 rounded">
                    <ul class="list-disc ml-4">
                        <li class="mb-2">Circuit Board (16)</li>
                        <li class="mb-2">Core Section (11)</li>
                        <li class="mb-2">Resonance Circuit</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Interactive Diagram Section -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-4">Component Diagram</h2>
            <div class="pen-diagram" id="diagram-container">
                <!-- SVG or Canvas content will be inserted here -->
            </div>
        </div>

        <!-- Animated Mermaid Diagram -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-4">Structure Hierarchy</h2>
            <div class="mermaid">
                graph TD
                    classDef default fill:#f9f9f9,stroke:#333,stroke-width:2px;
                    classDef highlight fill:#e3f2fd,stroke:#1976d2,stroke-width:3px;
                    
                    A[Electronic Pen] -->|Houses| B[Writing Device]
                    A -->|Contains| C[Pressure System]
                    A -->|Includes| D[Electronics]
                    
                    B -->|Components| B1[First Portion]
                    B -->|Components| B2[Second Portion]
                    B1 -->|Features| B1a[Pen Tip]
                    B1 -->|Contains| B1b[Lead Mechanism]
                    
                    C -->|Parts| C1[Transmitter]
                    C -->|Parts| C2[Detector]
                    C -->|Parts| C3[Processing]
                    
                    D -->|Contains| D1[Circuit Board]
                    D -->|Houses| D2[Core Section]
                    D -->|Features| D3[Resonance Circuit]
                    
                    class A,B,C,D highlight;
            </div>
        </div>

        <!-- Animated Feature List -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-4">Key Features</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="scrolling-text">
                    <h3 class="text-xl font-bold mb-2">Mechanical Features</h3>
                    <ul class="list-disc ml-6">
                        <li class="mb-2">Lead Delivery System</li>
                        <li class="mb-2">Pressure Detection</li>
                        <li class="mb-2">Eraser Function</li>
                    </ul>
                </div>
                <div class="scrolling-text">
                    <h3 class="text-xl font-bold mb-2">Electronic Features</h3>
                    <ul class="list-disc ml-6">
                        <li class="mb-2">EMR/AES Compatibility</li>
                        <li class="mb-2">Position Detection</li>
                        <li class="mb-2">Pressure Sensitivity</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize GSAP ScrollTrigger
        gsap.registerPlugin(ScrollTrigger);

        // Initialize Mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose',
        });

        // Initialize Three.js
        function init3DModel() {
            const container = document.getElementById('3d-model');
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ antialias: true });
            
            renderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(renderer.domElement);

            // Add basic pen model (simplified for example)
            const geometry = new THREE.CylinderGeometry(0.5, 0.5, 5, 32);
            const material = new THREE.MeshPhongMaterial({ color: 0x156289 });
            const pen = new THREE.Mesh(geometry, material);
            
            scene.add(pen);
            
            // Add lighting
            const light = new THREE.PointLight(0xffffff, 1, 100);
            light.position.set(10, 10, 10);
            scene.add(light);
            
            camera.position.z = 10;

            // Animation loop
            function animate() {
                requestAnimationFrame(animate);
                pen.rotation.y += 0.01;
                renderer.render(scene, camera);
            }
            animate();
        }

        // Scroll animations
        function initScrollAnimations() {
            const scrollingTexts = document.querySelectorAll('.scrolling-text');
            
            scrollingTexts.forEach(text => {
                gsap.from(text, {
                    scrollTrigger: {
                        trigger: text,
                        start: "top 80%",
                        toggleClass: "visible"
                    },
                    y: 50,
                    opacity: 0,
                    duration: 1
                });
            });

            // Component cards animation
            gsap.from('.component-card', {
                scrollTrigger: {
                    trigger: '.component-card',
                    start: "top 80%",
                    stagger: 0.2
                },
                y: 100,
                opacity: 0,
                duration: 1
            });
        }

        // Initialize everything when the page loads
        window.addEventListener('load', () => {
            init3DModel();
            initScrollAnimations();
        });
    </script>
</body>
</html>
